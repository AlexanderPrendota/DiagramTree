<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="author" content="Alexander Prendota">
    <title>RADAR</title>
    <script src="js/goIntro.js"></script>
    <script>
      var $ = require('jquery');
      var fs = require('fs');

      var currentFile ="./conf/CreateDiagram.xml";
      var key = 1;
      var parent = 0;
      var datas = [];

      function readXML() {
      fs.readFile(currentFile,'utf-8',
      function(err, data) {
      if (err) {
      alert("Error: Something went wrong");
      } else {
      parse(data);
      }
      });
      }

      /*
      function readXML() { $.ajax({
      url: currentFile,
      dataType: "xml",
      success: parse,
      error: function(){alert("Error: Something went wrong");}
      });
      */

      function parse(document){
      $(document).find("datasource").each(function(){
      datas.push({
      key: key.toString(),
      parent: parent.toString(),
      name: $(this).text()
      });
      currentFile = $(this).text();
      readXML();
      key++;

      });
      parent++;
      }


    </script>
  </head>

  <body onload="readXML()">
    <button onclick="goIntro(datas)">MAKE DIAGRAM</button>
    <div id="myDiagramDiv" style="width:1480px; height:900px; background-color: #DAE4E4;"></div>
  </body>
</html>
